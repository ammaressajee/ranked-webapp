<div class="profile-container" *ngIf="player() as p">
  <div class="profile-header">
    <img [src]="p.photoURL || 'assets/default-avatar.png'" alt="Profile" class="profile-avatar">
    <div class="profile-info">
      <h2>{{ p.displayName }}</h2>
      <p class="tier">{{ getTier(p.rank) }}</p>
      <p class="join-date">Joined {{ p.joinedAt?.toDate ? (p.joinedAt.toDate() | date) : (p.joinedAt | date) }}</p>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card"><h3>{{ p.rank }}</h3><p>Rank</p></div>
    <div class="stat-card"><h3>{{ p.wins || 0 }}</h3><p>Wins</p></div>
    <div class="stat-card"><h3>{{ p.losses || 0 }}</h3><p>Losses</p></div>
    <div class="stat-card"><h3>{{ p.matchesCount || 0 }}</h3><p>Matches</p></div>
  </div>

  <div class="recent-matches">
    <h3>Recent Matches</h3>
    <ul>
      <li *ngFor="let match of recentMatches()">
        <span>vs {{ match.playerB }}</span>
        <span class="result" [class.win]="match.matchWinner === p.uid" [class.loss]="match.matchWinner !== p.uid">
          {{ match.matchWinner === p.uid ? 'ğŸ† Won' : 'âŒ Lost' }}
        </span>
      </li>
    </ul>
  </div>
</div>
